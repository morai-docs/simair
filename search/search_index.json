{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Welcome to MORAI SIM Air Documentation \ud83d\udc4d \uf0c1 This document is a User Guide for MORAI SIM: Air alpha version provided to CIRRUS AIRCRAFT Take a look the MORAI SIM: Air 's concept and features. Start MORAI SIM: Air by reading the introductory tutorial , then check the user guide for more information. To checkout MORAI SIM: Air , Go to Introduction To start MORAI SIM: Air , Go to Getting Started To use MORAI SIM: Air , Go to User Guide","title":"Welcome to MORAI SIM Air Documentation \ud83d\udc4d"},{"location":"#welcome-to-morai-sim-air-documentation","text":"This document is a User Guide for MORAI SIM: Air alpha version provided to CIRRUS AIRCRAFT Take a look the MORAI SIM: Air 's concept and features. Start MORAI SIM: Air by reading the introductory tutorial , then check the user guide for more information. To checkout MORAI SIM: Air , Go to Introduction To start MORAI SIM: Air , Go to Getting Started To use MORAI SIM: Air , Go to User Guide","title":"Welcome to MORAI SIM Air Documentation \ud83d\udc4d"},{"location":"release-notes/","text":"Release Notes \uf0c1 This section describes the additions, changes, and bug fixes reflected in MORAI SIM: Air by latest and previous versions. Latest \uf0c1 Version Release Date Additions and Changes Bug Fixes Alpha 1.0 2023/03/27 Initial distribution Previous versions \uf0c1 N/A","title":"\ud83d\uddc2\ufe0f Release Note"},{"location":"release-notes/#release-notes","text":"This section describes the additions, changes, and bug fixes reflected in MORAI SIM: Air by latest and previous versions.","title":"Release Notes"},{"location":"release-notes/#latest","text":"Version Release Date Additions and Changes Bug Fixes Alpha 1.0 2023/03/27 Initial distribution","title":"Latest"},{"location":"release-notes/#previous-versions","text":"N/A","title":"Previous versions"},{"location":"about/overview/","text":"Document Overview \uf0c1 This section describes the purpose, target audiences, and scope of this document. Purpose \uf0c1 This document is written to guide the configuration environment and usage of \u2018MORAI SIM: Air\u2019, an autonomous flight simulation platform developed by Morai. Target Audience \uf0c1 This document is written for aeronautical developers and researchers who want to verify air vehicles in various simulated virtual environments. Scope \uf0c1 The scope of application of this document applies to the configuration environment and user interface of MORAI SIM: Air, and all functions provided by MORAI SIM: Air.","title":"Document Overview"},{"location":"about/overview/#document-overview","text":"This section describes the purpose, target audiences, and scope of this document.","title":"Document Overview"},{"location":"about/overview/#purpose","text":"This document is written to guide the configuration environment and usage of \u2018MORAI SIM: Air\u2019, an autonomous flight simulation platform developed by Morai.","title":"Purpose"},{"location":"about/overview/#target-audience","text":"This document is written for aeronautical developers and researchers who want to verify air vehicles in various simulated virtual environments.","title":"Target Audience"},{"location":"about/overview/#scope","text":"The scope of application of this document applies to the configuration environment and user interface of MORAI SIM: Air, and all functions provided by MORAI SIM: Air.","title":"Scope"},{"location":"about/revision-history/","text":"Revision History \uf0c1 This section describes the revision history of the document in chronological order. Document Version Product Version Release Date Descriptions Author 1.0 Alpha 1.0 April 4, 2023 Initial Release MORAI Engineering Service Team","title":"Revision History"},{"location":"about/revision-history/#revision-history","text":"This section describes the revision history of the document in chronological order. Document Version Product Version Release Date Descriptions Author 1.0 Alpha 1.0 April 4, 2023 Initial Release MORAI Engineering Service Team","title":"Revision History"},{"location":"about/terms-conventions/","text":"Terminology and Conventions \uf0c1 This section describes key terms and conventions commonly used in the document. Terminology \uf0c1 The key Terms and Abbreviations used in this documents are listed below: Terms and Abbreviations Descriptions Ego Vehicle Control flight target aircraft in the simulator NPC Vehicle Surrounding aircraft that are not controlled flight targets in the simulator ROS2 The latest version of Robot Operating System(ROS) JSBSim An open source, multi-platform, object-oriented flight dynamics model (FDM) framework written in the C++ programming language AOA Angle of Attack, unit: degrees CAS Calibrated Airspeed, unit: knots GS Ground Speed, unit: knots Attitude Indicator Shows the altitude of the aircrafte Altimeter Shows the altitude of the aircraft above ground level(AGL) in feet Vertical Speed Indicator Shows the vertical speed of the aircraft in feet per minute Conventions \uf0c1 The notational conventions for notes, warnings, and tips used in this document are as follows: \u2139\ufe0f NOTE General Information for related matters. \u26a0\ufe0f WARNING For matters you should follow when setting or configuration \u2705 TIPS Useful tips when setting or configuration","title":"Terminology and Conventions"},{"location":"about/terms-conventions/#terminology-and-conventions","text":"This section describes key terms and conventions commonly used in the document.","title":"Terminology and Conventions"},{"location":"about/terms-conventions/#terminology","text":"The key Terms and Abbreviations used in this documents are listed below: Terms and Abbreviations Descriptions Ego Vehicle Control flight target aircraft in the simulator NPC Vehicle Surrounding aircraft that are not controlled flight targets in the simulator ROS2 The latest version of Robot Operating System(ROS) JSBSim An open source, multi-platform, object-oriented flight dynamics model (FDM) framework written in the C++ programming language AOA Angle of Attack, unit: degrees CAS Calibrated Airspeed, unit: knots GS Ground Speed, unit: knots Attitude Indicator Shows the altitude of the aircrafte Altimeter Shows the altitude of the aircraft above ground level(AGL) in feet Vertical Speed Indicator Shows the vertical speed of the aircraft in feet per minute","title":"Terminology"},{"location":"about/terms-conventions/#conventions","text":"The notational conventions for notes, warnings, and tips used in this document are as follows: \u2139\ufe0f NOTE General Information for related matters. \u26a0\ufe0f WARNING For matters you should follow when setting or configuration \u2705 TIPS Useful tips when setting or configuration","title":"Conventions"},{"location":"getting-started/","text":"Getting Startged with MORAI SIM: AIR \uf0c1 Installation User Interface","title":"Getting Startged with MORAI SIM: AIR"},{"location":"getting-started/#getting-startged-with-morai-sim-air","text":"Installation User Interface","title":"Getting Startged with MORAI SIM: AIR"},{"location":"getting-started/installation/","text":"Installation \uf0c1 This section describes the system requirements for installing MORAI SIM: Air and how to run it. System Requirements \uf0c1 OS Environment \uf0c1 The OS environment in which MORAI SIM: Air can run is as follows. Windows 10 or higher Ubuntu 18.04 LTS or higher \u2139\ufe0f NOTE A version for Ubuntu (Linux) is under development. System Specifications \uf0c1 To use multiple sensors in MORAI SIM: Air, the system specifications below should be satisfied. CPU: Intel i7 or higher RAM: 32GB or higher VGA: RTX 30 series or higher Running MORAI SIM: Air \uf0c1 Install and run MORAI SIM: Air in the following order. Step 1: Download MORAI SIM Launcher \uf0c1 Download the MORAI SIM Launcher package according to the user's OS environment. \u2705 TIPS For the download path of MORAI SIM Launcher, please contact the MORAI project manager . Step 2: Run the launcher program \uf0c1 1) Run UELauncher.exe from the downloaded package path. 2) On the launcher execution screen as shown below, click Start after entering the Username and Password guided by MORAI. \u2705 TIPS For details regarding Username and Password information, please contact the MORAI project manager . Step 3: Select Map and Aircraft \uf0c1 After launcher execution is completed, the following Map and Vehicle screen appears. After selecting both the map and aircraft model to be used in the simulator, click Start to run the simulator. The Runway {number} option of Select Map is a spawn point setting that sets the runway facing the direction of '{number}+0' degrees. Ex ) If you select Runway 3 , the spawn point is the runway facing a 30 degree direction. \u2705 TIPS The start button does not appear unless either the map or aircraft model is selected. Step 4: Check the simulator run \uf0c1 When the MORAI SIM:Air simulator is normally executed, the following simulator execution screen appears.","title":"Installation"},{"location":"getting-started/installation/#installation","text":"This section describes the system requirements for installing MORAI SIM: Air and how to run it.","title":"Installation"},{"location":"getting-started/installation/#system-requirements","text":"","title":"System Requirements"},{"location":"getting-started/installation/#os-environment","text":"The OS environment in which MORAI SIM: Air can run is as follows. Windows 10 or higher Ubuntu 18.04 LTS or higher \u2139\ufe0f NOTE A version for Ubuntu (Linux) is under development.","title":"OS Environment"},{"location":"getting-started/installation/#system-specifications","text":"To use multiple sensors in MORAI SIM: Air, the system specifications below should be satisfied. CPU: Intel i7 or higher RAM: 32GB or higher VGA: RTX 30 series or higher","title":"System Specifications"},{"location":"getting-started/installation/#running-morai-sim-air","text":"Install and run MORAI SIM: Air in the following order.","title":"Running MORAI SIM: Air"},{"location":"getting-started/installation/#step-1-download-morai-sim-launcher","text":"Download the MORAI SIM Launcher package according to the user's OS environment. \u2705 TIPS For the download path of MORAI SIM Launcher, please contact the MORAI project manager .","title":"Step 1: Download MORAI SIM Launcher"},{"location":"getting-started/installation/#step-2-run-the-launcher-program","text":"1) Run UELauncher.exe from the downloaded package path. 2) On the launcher execution screen as shown below, click Start after entering the Username and Password guided by MORAI. \u2705 TIPS For details regarding Username and Password information, please contact the MORAI project manager .","title":"Step 2: Run the launcher program"},{"location":"getting-started/installation/#step-3-select-map-and-aircraft","text":"After launcher execution is completed, the following Map and Vehicle screen appears. After selecting both the map and aircraft model to be used in the simulator, click Start to run the simulator. The Runway {number} option of Select Map is a spawn point setting that sets the runway facing the direction of '{number}+0' degrees. Ex ) If you select Runway 3 , the spawn point is the runway facing a 30 degree direction. \u2705 TIPS The start button does not appear unless either the map or aircraft model is selected.","title":"Step 3: Select Map and Aircraft"},{"location":"getting-started/installation/#step-4-check-the-simulator-run","text":"When the MORAI SIM:Air simulator is normally executed, the following simulator execution screen appears.","title":"Step 4: Check the simulator run"},{"location":"getting-started/ui/","text":"User Interface \uf0c1 This section discribes an overview of the MORAI SIM: Air user interface (UI) and provides the detailed information on each UI component. UI Overview \uf0c1 The MORAI SIM: Air UI is designed to provide users with easy access to all necessary information and controls, allowing for a realistic and immersive simulation experience. The entire UI screen of Sim Air is shown below. Figure 1. UI overview of MORAI SIM: Air Default UI \uf0c1 The default UI appears as soon as you enter the simulater for the first time. Centered on the map and aircraft selected in the previous step, it consists of the following three parts: 1] Network and Sensor Settings , 2] Environment Settings , and 3] Flight Instruments . Figure 2. Default UI of MORAI SIM: Air 1] Network and Sensor Settings \uf0c1 This menu is located in the upper left menu of the simulator screen, and provides access to the network and sensor settings, which are the core features provided by the simulator. \u2705 TIPS For details on how to use network and sensor functions, see the Using MORAI SIM: AIR part. 2] Environment Settings \uf0c1 This menu is located in the upper right menu of the simulator screen, and provides weather and time of day configurations that determine the background and lighting of the simulator. 3] Flight Instruments \uf0c1 The flight instruments are located on the left side of the simulator screen, and provide real-time flight information such as the current heading, air speed, attitude, and altitude of the aircraft. 3-1] Heading Indicator \uf0c1 Displays the heading of the aircraft in degrees. 3-2] Airspeed Indicator \uf0c1 Displays the indicated airspeed in knots. 3-3] Attitude Indicator \uf0c1 Displays the altitude of the aircraft with pich and bank values as shown below. Pitch: Displays the upper/lower pitch values on the vertical scale in increments of 5 degrees based on a small scale (in the order of '0 - 5 - 10 - 15 - 20 degrees'). Bank: Displays left/right rolling values from 0 to 60 degrees based on the center 0 point (in the order of '0 - 10 - 20 - 30 - 45 - 60 degrees'). 3-4] Altimeter \uf0c1 Displays the altitude of the aircraft with altitude above sea level (ASL) and altitude above ground (AVL) as shown below. ASL: Indicates altitude above sea level(ASL) on a circular scale (unit: feet). AVL: Indicates altitude above ground (AVL) in square numbers above the circular scale (unit: feet). 3-5] Vertical Speed Indicator \uf0c1 Displays the vertical speed of the aircraft in feet per minute. Aircraft Info UI \uf0c1 The Aircraft Information UI provides the aircraft control mode and current flight status such as airspeed and air pressure, as well as steering inputs for control surfaces and attitude, in detailed numerical values. If you click the mouse on the Ego aircraft , the Aircraft Information window appears on the right side of the simulator screen as shown below. Figure 3. Aircraft Info UI of MORAI SIM: Air 1] Aircraft Control Mode \uf0c1 Displays the mode to control the Ego aircraft with Manual Control Mode and Network Control Mode . Manual Control Mode is a mode in which the user controls the aircraft with a keyboard or joystick. The default Manual Control Mode is keyboard control, and the keyboard Q key toggles between keyboard control and joystick control. To control the aircraft with a joystick, connect the joystick to the simulator via USB and press Q . Then, to control the aircraft with the keyboard, press Q again. 2] Propulsion \uf0c1 Displays engine RPM, air speed (knots), thrust according to throttle control and manifold pressure (inHg) according to aircraft altitude. \u2705 TIPS In Manual Control Mode , when you press E on the keyboard, the value of Throttle (up to 1) increases. In addition, see the Basic Controls section for a detailed description of each key used to operate the aircraft with the keyboard in Manual Control Mode. 3] Flight Control \uf0c1 Displays the flight control surfaces and trim control value, as Primary Control , along with the Attitude , Vertical Info and Airspeed values \u200b\u200bof the aircraft in detailed numerical values. See below for descriptions of abbreviations and terms in Flight Control . \u2139\ufe0f NOTE AOA: Angle of Attack (degrees) EAS: Equivalent Airspeed (knots) TAS: True Airspeed (knots) GS: Ground Speed (knots) Climb Rate: Vertical Speed Indicator (feet per minute) Trim: Shows the input data of each trim from -1 to +1 \u2705 TIPS See the Basic Controls section for a detailed description of each key for controlling the flight control surfaces and trim of each Aileron, Elevator, Rudder as Primary Control and Flap as Secondary Control .","title":"User Interface"},{"location":"getting-started/ui/#user-interface","text":"This section discribes an overview of the MORAI SIM: Air user interface (UI) and provides the detailed information on each UI component.","title":"User Interface"},{"location":"getting-started/ui/#ui-overview","text":"The MORAI SIM: Air UI is designed to provide users with easy access to all necessary information and controls, allowing for a realistic and immersive simulation experience. The entire UI screen of Sim Air is shown below. Figure 1. UI overview of MORAI SIM: Air","title":"UI Overview"},{"location":"getting-started/ui/#default-ui","text":"The default UI appears as soon as you enter the simulater for the first time. Centered on the map and aircraft selected in the previous step, it consists of the following three parts: 1] Network and Sensor Settings , 2] Environment Settings , and 3] Flight Instruments . Figure 2. Default UI of MORAI SIM: Air","title":"Default UI"},{"location":"getting-started/ui/#1-network-and-sensor-settings","text":"This menu is located in the upper left menu of the simulator screen, and provides access to the network and sensor settings, which are the core features provided by the simulator. \u2705 TIPS For details on how to use network and sensor functions, see the Using MORAI SIM: AIR part.","title":"1] Network and Sensor Settings"},{"location":"getting-started/ui/#2-environment-settings","text":"This menu is located in the upper right menu of the simulator screen, and provides weather and time of day configurations that determine the background and lighting of the simulator.","title":"2] Environment Settings"},{"location":"getting-started/ui/#3-flight-instruments","text":"The flight instruments are located on the left side of the simulator screen, and provide real-time flight information such as the current heading, air speed, attitude, and altitude of the aircraft.","title":"3] Flight Instruments"},{"location":"getting-started/ui/#3-1-heading-indicator","text":"Displays the heading of the aircraft in degrees.","title":"3-1] Heading Indicator"},{"location":"getting-started/ui/#3-2-airspeed-indicator","text":"Displays the indicated airspeed in knots.","title":"3-2] Airspeed Indicator"},{"location":"getting-started/ui/#3-3-attitude-indicator","text":"Displays the altitude of the aircraft with pich and bank values as shown below. Pitch: Displays the upper/lower pitch values on the vertical scale in increments of 5 degrees based on a small scale (in the order of '0 - 5 - 10 - 15 - 20 degrees'). Bank: Displays left/right rolling values from 0 to 60 degrees based on the center 0 point (in the order of '0 - 10 - 20 - 30 - 45 - 60 degrees').","title":"3-3] Attitude Indicator"},{"location":"getting-started/ui/#3-4-altimeter","text":"Displays the altitude of the aircraft with altitude above sea level (ASL) and altitude above ground (AVL) as shown below. ASL: Indicates altitude above sea level(ASL) on a circular scale (unit: feet). AVL: Indicates altitude above ground (AVL) in square numbers above the circular scale (unit: feet).","title":"3-4] Altimeter"},{"location":"getting-started/ui/#3-5-vertical-speed-indicator","text":"Displays the vertical speed of the aircraft in feet per minute.","title":"3-5] Vertical Speed Indicator"},{"location":"getting-started/ui/#aircraft-info-ui","text":"The Aircraft Information UI provides the aircraft control mode and current flight status such as airspeed and air pressure, as well as steering inputs for control surfaces and attitude, in detailed numerical values. If you click the mouse on the Ego aircraft , the Aircraft Information window appears on the right side of the simulator screen as shown below. Figure 3. Aircraft Info UI of MORAI SIM: Air","title":"Aircraft Info UI"},{"location":"getting-started/ui/#1-aircraft-control-mode","text":"Displays the mode to control the Ego aircraft with Manual Control Mode and Network Control Mode . Manual Control Mode is a mode in which the user controls the aircraft with a keyboard or joystick. The default Manual Control Mode is keyboard control, and the keyboard Q key toggles between keyboard control and joystick control. To control the aircraft with a joystick, connect the joystick to the simulator via USB and press Q . Then, to control the aircraft with the keyboard, press Q again.","title":"1] Aircraft Control Mode"},{"location":"getting-started/ui/#2-propulsion","text":"Displays engine RPM, air speed (knots), thrust according to throttle control and manifold pressure (inHg) according to aircraft altitude. \u2705 TIPS In Manual Control Mode , when you press E on the keyboard, the value of Throttle (up to 1) increases. In addition, see the Basic Controls section for a detailed description of each key used to operate the aircraft with the keyboard in Manual Control Mode.","title":"2] Propulsion"},{"location":"getting-started/ui/#3-flight-control","text":"Displays the flight control surfaces and trim control value, as Primary Control , along with the Attitude , Vertical Info and Airspeed values \u200b\u200bof the aircraft in detailed numerical values. See below for descriptions of abbreviations and terms in Flight Control . \u2139\ufe0f NOTE AOA: Angle of Attack (degrees) EAS: Equivalent Airspeed (knots) TAS: True Airspeed (knots) GS: Ground Speed (knots) Climb Rate: Vertical Speed Indicator (feet per minute) Trim: Shows the input data of each trim from -1 to +1 \u2705 TIPS See the Basic Controls section for a detailed description of each key for controlling the flight control surfaces and trim of each Aileron, Elevator, Rudder as Primary Control and Flap as Secondary Control .","title":"3] Flight Control"},{"location":"intro/morai-simair/","text":"About MORAI SIM: Air \uf0c1 This section explains the concept and features of MORAI SIM: Air and the configuration environment. Concept and Key Features \uf0c1 MORAI SIM: Air is a simulation platform that can verify autonomous flight systems used in various industries such as Urban Air Mobility (UAM), unmanned aerial vehicles (Drones), and light aircraft in a virtual environment. MORAI SIM: Air provides a variety of real flight environments as virtual simulations using Digital Twin technology, so the safety of the aircraft can be verified more efficiently and accurately. And it reporduces actual flight facilities such as vertical take-off and landing facilities (vertiport) and airports for vehicle verification as a digital twin environment, and simulates the actual measurement data provided to the aircraft from each facility as it is. MORAI SIM: Air virtualizes various sensors and flight dynamics model (FDM) specialized for the aviation industry, and can transmit and receive data in real-time by applying communication such as ROS2 and UDP . The main features of MORAI SIM: Air are as follows. Provides a simulation environment based on Unreal Engine , a physics engine Supports realistic flight dynamics model (FDM) for Cirrus SR22T and 6 degrees of freedom (DOF) data Supports realistic flight dynamics model (FDM) developed with JSBSim , and 6 degrees of freedom (DOF) data Reproduces weather and time variation with dynamic environment Integration with external sensors and systems: Camera, GNSS, IMU, RADAR, 3D LiDAR Supports real-time transmission of flight status messages and sensor data through ROS2 and UDP communication Simulation environment based on Unreal Engine \uf0c1 MORAI SIM: Air utilizes the physics engine, Unreal Engine to provide a high-fidelity simulation environment for autonomous aerial vehicles, and it can reproduce object movement, physical conditions such as collision and penetration, as well as color and texture realistically. Unreal Engine allows for the creation of highly detailed 3D environments and provides a sophisticated physics engine that can simulate the behavior of objects in a realistic manner. This means that the movement of the aerial vehicles, as well as other objects in the simulation environment, are accurately represented. Moreover, the Unreal Engine can render textures and colors realistically, which helps to create a more immersive simulation experience for users. This allows users to visualize and interact with the simulation environment in a way that closely mirrors the real-world environment, and enables them to test and validate the performance of their autonomous flight systems under realistic conditions. Figure 1. 3D Simulation environment for Duluth airport provided by MORAI SIM: Air Supports realistic flight dynamics model and 6 DOF \uf0c1 MORAI SIM: Air supports realistic flight dynamics models (FDM) based on JSBSim for simulation modeling of the behavior of aircraft engines and other systems. Additionally, MORAI SIM: Air implements the Cirrus SR22T aircraft model and 6 degrees of freedom (DOF) data, providing a realistic simulation experience. Figure 2. Flight of SR22T model implemented in MORAI SIM: Air Figure 3. Flight control of SR22T with joystick in MORAI SIM: Air Reproduces weather and time variation with dynamic environment \uf0c1 MORAI SIM: Air also includes a simulation of the environment and weather conditions, which affect the flight behavior and performance of the aerial vehicles. This allows users to test their autonomous flight systems under different conditions and scenarios. Figure 4. Reproduced video of weather and time condition changes in MORAI SIM: Air Integration with external sensors and real-time communication \uf0c1 MORAI SIM: Air supports integration with a variety of external sensors commonly used in autonomous flight systems, including Camera, GNSS, IMU, RADAR, and LiDAR sensors. This enables users to test and validate the integration and performance of their sensors and systems in a virtual environment. Figure 5. Sensor models provided by MORAI SIM: Air Also, MORAI SIM: Air supports real-time communication for flight status messages and sensor data using the ROS2 and UDP communication protocols. This enables users to monitor and analyze the performance of their autonomous flight systems during the simulation in real-time. Figure 6. Network settings provided by MORAI SIM: Air","title":"About MORAI SIM: Air"},{"location":"intro/morai-simair/#about-morai-sim-air","text":"This section explains the concept and features of MORAI SIM: Air and the configuration environment.","title":"About MORAI SIM: Air"},{"location":"intro/morai-simair/#concept-and-key-features","text":"MORAI SIM: Air is a simulation platform that can verify autonomous flight systems used in various industries such as Urban Air Mobility (UAM), unmanned aerial vehicles (Drones), and light aircraft in a virtual environment. MORAI SIM: Air provides a variety of real flight environments as virtual simulations using Digital Twin technology, so the safety of the aircraft can be verified more efficiently and accurately. And it reporduces actual flight facilities such as vertical take-off and landing facilities (vertiport) and airports for vehicle verification as a digital twin environment, and simulates the actual measurement data provided to the aircraft from each facility as it is. MORAI SIM: Air virtualizes various sensors and flight dynamics model (FDM) specialized for the aviation industry, and can transmit and receive data in real-time by applying communication such as ROS2 and UDP . The main features of MORAI SIM: Air are as follows. Provides a simulation environment based on Unreal Engine , a physics engine Supports realistic flight dynamics model (FDM) for Cirrus SR22T and 6 degrees of freedom (DOF) data Supports realistic flight dynamics model (FDM) developed with JSBSim , and 6 degrees of freedom (DOF) data Reproduces weather and time variation with dynamic environment Integration with external sensors and systems: Camera, GNSS, IMU, RADAR, 3D LiDAR Supports real-time transmission of flight status messages and sensor data through ROS2 and UDP communication","title":"Concept and Key Features"},{"location":"intro/morai-simair/#simulation-environment-based-on-unreal-engine","text":"MORAI SIM: Air utilizes the physics engine, Unreal Engine to provide a high-fidelity simulation environment for autonomous aerial vehicles, and it can reproduce object movement, physical conditions such as collision and penetration, as well as color and texture realistically. Unreal Engine allows for the creation of highly detailed 3D environments and provides a sophisticated physics engine that can simulate the behavior of objects in a realistic manner. This means that the movement of the aerial vehicles, as well as other objects in the simulation environment, are accurately represented. Moreover, the Unreal Engine can render textures and colors realistically, which helps to create a more immersive simulation experience for users. This allows users to visualize and interact with the simulation environment in a way that closely mirrors the real-world environment, and enables them to test and validate the performance of their autonomous flight systems under realistic conditions. Figure 1. 3D Simulation environment for Duluth airport provided by MORAI SIM: Air","title":"Simulation environment based on Unreal Engine"},{"location":"intro/morai-simair/#supports-realistic-flight-dynamics-model-and-6-dof","text":"MORAI SIM: Air supports realistic flight dynamics models (FDM) based on JSBSim for simulation modeling of the behavior of aircraft engines and other systems. Additionally, MORAI SIM: Air implements the Cirrus SR22T aircraft model and 6 degrees of freedom (DOF) data, providing a realistic simulation experience. Figure 2. Flight of SR22T model implemented in MORAI SIM: Air Figure 3. Flight control of SR22T with joystick in MORAI SIM: Air","title":"Supports realistic flight dynamics model and 6 DOF"},{"location":"intro/morai-simair/#reproduces-weather-and-time-variation-with-dynamic-environment","text":"MORAI SIM: Air also includes a simulation of the environment and weather conditions, which affect the flight behavior and performance of the aerial vehicles. This allows users to test their autonomous flight systems under different conditions and scenarios. Figure 4. Reproduced video of weather and time condition changes in MORAI SIM: Air","title":"Reproduces weather and time variation with dynamic environment"},{"location":"intro/morai-simair/#integration-with-external-sensors-and-real-time-communication","text":"MORAI SIM: Air supports integration with a variety of external sensors commonly used in autonomous flight systems, including Camera, GNSS, IMU, RADAR, and LiDAR sensors. This enables users to test and validate the integration and performance of their sensors and systems in a virtual environment. Figure 5. Sensor models provided by MORAI SIM: Air Also, MORAI SIM: Air supports real-time communication for flight status messages and sensor data using the ROS2 and UDP communication protocols. This enables users to monitor and analyze the performance of their autonomous flight systems during the simulation in real-time. Figure 6. Network settings provided by MORAI SIM: Air","title":"Integration with external sensors and real-time communication"},{"location":"user-guide/","text":"How to Use MORAI SIM: AIR \uf0c1 Basic Controls Network Configurations Sensors Useful Functions","title":"How to Use MORAI SIM: AIR"},{"location":"user-guide/#how-to-use-morai-sim-air","text":"Basic Controls Network Configurations Sensors Useful Functions","title":"How to Use MORAI SIM: AIR"},{"location":"user-guide/basic-controls/","text":"Basic Controls \uf0c1 This section explains how to operate the keys to control propulsion (airspeed and RPM) and flight control surfaces (heading and attitude, altitude) of the aircraft. Propulsion Controls \uf0c1 The keys and methods for the throttle to control the output power of the aircraft such as speed and engine RPM are as follows. Key Action Note E Increase Throttle (up to 1) Air speed and RPM increase faster with long press D Decrease Throttle (down to 0) Air speed and RPM decrease faster with long press C Cut and idle Throttle Press once to set the throttle value to zero B Brake on ground Acts on landing gear brake pads Flight Controls \uf0c1 The keys and methods for controlling each flight control surface and trim for Aileron, Elevator, and Rudder as Primary Control and Flap as Secondary Control are as follows. Primary Flight Control Surfaces \uf0c1 The control keys for each Aileron, Elevator, and Rudder, which are the control surfaces of the aircraft that control the aircraft's heading and attitude, such as bank, pitch, and yaw, are as follows. Key Action Note Num pad 4 and 6 Aileron Left and Right Bank (rolling), x-axis direction control (left/right during flight) Num pad 2 and 8 Elevator Up and Down Pitching, z-axis direction control Num pad 7 and 9 Rudder Left and Right Yawing, z-axis direction control (left/right on the ground) Num pad 5 Aileron and Rudder to stabilized position Space Elevator to stabilized position Secondary Flight Control Surfaces \uf0c1 The control keys for Flaps that generate high lift by changing the shape of the main wing are as follows. Key Action Note R Flap 0 stage Positioned at flap 0 degree in any section F Flap retract 1 step V Flap extract 1 step Trim Flight Control Surfaces \uf0c1 The trim keys for each fine attitude adjustment of Aileron, Elevator, and Rudder are as follows. Key Action Note T Trim the Elevator down Fine adjust the pitch of the elevator down G Trim the Elevator up Fine adjust the pitch of the elevator up Y Trim the Aileron to the right Fine adjust the bank of aileron to the right H Trim the Aileron to the left Fine adjust the bank of aileron to the left U Trim the Rudder to the right Fine adjust the yaw of rudder to the right J Trim the Rudder to the left Fine adjust the yaw of rudder to the left Other Controls \uf0c1 The keys to operate the control mode, viewpoint and location of the aircraft in the simulator are as follows. Key Action I Return the aircraft's position to its original spawn point Q Toggel between keyboard and joystick in Manual Control Mode Right-click + Drag Adjust Aircraft View Orientation Mouse wheel scrolls up and down Zooming in and out of the simulator screen \u2705 TIPS Revert to spawn point : Each time I is pressed, the spawn point changes in the order of location of 'Runway 27 \u2192 09 \u2192 03 \u2192 21'. \u2705 TIPS Adjusting the Aircraft View Orientation : By right-clicking and dragging the mouse on the simulator screen, you can adjust the viewing direction of the aircraft to multiple angles. \u2139\ufe0f NOTE The ability to change the spawn location will be added in a future version.","title":"Basic Controls"},{"location":"user-guide/basic-controls/#basic-controls","text":"This section explains how to operate the keys to control propulsion (airspeed and RPM) and flight control surfaces (heading and attitude, altitude) of the aircraft.","title":"Basic Controls"},{"location":"user-guide/basic-controls/#propulsion-controls","text":"The keys and methods for the throttle to control the output power of the aircraft such as speed and engine RPM are as follows. Key Action Note E Increase Throttle (up to 1) Air speed and RPM increase faster with long press D Decrease Throttle (down to 0) Air speed and RPM decrease faster with long press C Cut and idle Throttle Press once to set the throttle value to zero B Brake on ground Acts on landing gear brake pads","title":"Propulsion Controls"},{"location":"user-guide/basic-controls/#flight-controls","text":"The keys and methods for controlling each flight control surface and trim for Aileron, Elevator, and Rudder as Primary Control and Flap as Secondary Control are as follows.","title":"Flight Controls"},{"location":"user-guide/basic-controls/#primary-flight-control-surfaces","text":"The control keys for each Aileron, Elevator, and Rudder, which are the control surfaces of the aircraft that control the aircraft's heading and attitude, such as bank, pitch, and yaw, are as follows. Key Action Note Num pad 4 and 6 Aileron Left and Right Bank (rolling), x-axis direction control (left/right during flight) Num pad 2 and 8 Elevator Up and Down Pitching, z-axis direction control Num pad 7 and 9 Rudder Left and Right Yawing, z-axis direction control (left/right on the ground) Num pad 5 Aileron and Rudder to stabilized position Space Elevator to stabilized position","title":"Primary Flight Control Surfaces"},{"location":"user-guide/basic-controls/#secondary-flight-control-surfaces","text":"The control keys for Flaps that generate high lift by changing the shape of the main wing are as follows. Key Action Note R Flap 0 stage Positioned at flap 0 degree in any section F Flap retract 1 step V Flap extract 1 step","title":"Secondary Flight Control Surfaces"},{"location":"user-guide/basic-controls/#trim-flight-control-surfaces","text":"The trim keys for each fine attitude adjustment of Aileron, Elevator, and Rudder are as follows. Key Action Note T Trim the Elevator down Fine adjust the pitch of the elevator down G Trim the Elevator up Fine adjust the pitch of the elevator up Y Trim the Aileron to the right Fine adjust the bank of aileron to the right H Trim the Aileron to the left Fine adjust the bank of aileron to the left U Trim the Rudder to the right Fine adjust the yaw of rudder to the right J Trim the Rudder to the left Fine adjust the yaw of rudder to the left","title":"Trim Flight Control Surfaces"},{"location":"user-guide/basic-controls/#other-controls","text":"The keys to operate the control mode, viewpoint and location of the aircraft in the simulator are as follows. Key Action I Return the aircraft's position to its original spawn point Q Toggel between keyboard and joystick in Manual Control Mode Right-click + Drag Adjust Aircraft View Orientation Mouse wheel scrolls up and down Zooming in and out of the simulator screen \u2705 TIPS Revert to spawn point : Each time I is pressed, the spawn point changes in the order of location of 'Runway 27 \u2192 09 \u2192 03 \u2192 21'. \u2705 TIPS Adjusting the Aircraft View Orientation : By right-clicking and dragging the mouse on the simulator screen, you can adjust the viewing direction of the aircraft to multiple angles. \u2139\ufe0f NOTE The ability to change the spawn location will be added in a future version.","title":"Other Controls"},{"location":"user-guide/network/","text":"Network Configuration \uf0c1 This section describes the configuration of the network environment of MORAI SIM: Air, the setting method for data communication between external systems, and sending/receiving messages. Supported communication method \uf0c1 MORAI SIM: Air supports UDP and ROS2 for network communication between the simulator and external systems. UDP is a widely used network protocol for transmitting data over the internet, while ROS2 (Robot Operating System 2) is a popular middleware for robotics and automation applications. The MORAI SIM: Air simulator allows for sending sensor data and receiving aircraft control messages using either UDP or ROS2 communication methods. To communicate with MORAI SIM: Air, Depending on the simulator's message transmission/reception method, the following network settings are required. Figure 1. Network communication method supported by MORAI SIM: Air MORAI SIM: Air sends sensor data to an external system UDP Network Settings in each sensor model in the simulator Receive UDP messages and publish to ROS2 using UDP to ROS2 Bridge MORAI SIM: Air receives aircraft control messages from an external system UDP Network Settings provided by the simulator (Subscriber IP/Port setting) Subscribe to ROS2 messages and them over UDP using UDP to ROS2 Bridge The UDP to ROS2 Bridge serves to connect data between the UDP-based simulator and the ROS2 system by receiving and transmitting UDP signals and issuing and subscribing to ROS2 as shown below. Figure 2. Role of 'UDP to ROS2 Bridge' \u26a0\ufe0f WARNING The current simulator does not provide direct support for transmitting/receiving ROS2 messages. Therefore, UDP to ROS2 Bridge should be used for ROS2 communication with an external system. Receiving Aircraft Control Messages \uf0c1 For the simulator to receive ROS2 messages via UDP, Configure the ROS2 to UDP communication environment and set the network of the simulator in the order below. Step 1: Subscribe to ROS2 messages \uf0c1 For this step, you need to install and run UDP to ROS2 Bridge . \u2705 TIPS See the UDP to ROS2 Bridge User Guide provided separately. Step 2: UDP network settings in the simulator \uf0c1 1) Activate the network menu \uf0c1 Click Network in the top left menu as shown below. 2) Configure Host IP/Port \uf0c1 The method of receiving aircraft control messages in the simulator consists of GHOST MODE and EXTERNAL CTRL protocol. Configure the Host IP/Port as below to operate the aircraft in GHOST MODE by receiving external control messages. Host IP: Enter the IP of the host PC running the simulator Host Port: Enter the Port of Host PC Host IP/Port configuration method for EXTERNAL CTRL protocol is the same as above. 3) Network connection \uf0c1 Click Connect at the bottom PROTOCOL_SUB_GHOSTMODE or PROTOCOL_SUB_EXTERNALCTRL . Then, it enters into a standby state in which a control message can be received. Step 3: Send messages from external server \uf0c1 Send a message from the external server to the simulator using UDP to ROS2 Bridge. Send coordinates by playing rosbag file Send UDP packet UDP messages received by each mode are as follows. GHOST MODE: Cirrus_tx EXTERNAL CTRL: CIRRUS_CONTROL_POSITION // 101 SIM -> JSBSim CIRRUS_BRAKING // 102 CIRRUS_ENGINE // 103 \u2705 TIPS For details on the types and structure of UDP messages received in GHOST MODE or EXTERNAL CTRL, see the UDP Recieve Messages section. Sending Sensor Messages \uf0c1 For the simulator to send UDP messages via ROS2, Set the sensor network of the simulator in the order below and configure the UDP to ROS2 communication environment. Step 1: Senosr network settings in the simulator \uf0c1 1) Place sensors on the aircraft \uf0c1 \u2705 TIPS For details on how to place the sensor, see the Sensor Placement section. 2) Configure Destination IP/Port \uf0c1 Configure Destination IP/Port for UDP network in Network Settings at the bottom of the sensor setting window. Destination IP and Port : Enter the IP and port of the target server that transmits sensor data in the simulator. In case of ROS2 communication in the server, enter the IP and Port of the server where UDP to ROS2 Bridge is installed. 3) Network connection \uf0c1 Click Connect at the bottom of Network Settings . Then, it enters into a standby state in which sensor messages can be transmitted. In the case of a Camera sensor, when a sensor network is connected, a preview window appears on the left side of the sensor setting window as shown below. Step 2: Publishing to ROS2 \uf0c1 For this step, you need to install and run UDP to ROS2 Bridge . \u2705 TIPS See the UDP to ROS2 Bridge User Guide provided separately. \u2705 TIPS For details on the types and structure of UDP and ROS2 messages sent by the simulator, see the UDP Send Messages and ROS2 Send Messages section. Network Message Specifications \uf0c1 This section describes details such as the type and format of messages received and transmitted by MORAI SIM: Air as described above. UDP Messages Structure \uf0c1 All receiving and sending UDP messages are composed of 'Header + Data' . If the UDP packet size exceeds 65000, it is internally separated and transmitted, and reassembled at the receiving point. However, if the receiver uses Morai's UDP module, even if the defined max buffer is less than 65000, the separation logic works when trying to send a message larger than the max buffer. Ex) #define Max_buffer 1024: If the total data size to be sent exceeds 1024, it is sent separately. Header Information \uf0c1 struct MoraiHeader { char header_name[12]; // MoraiHeader int data_type; // data_type.h \ucc38\uc870 int data_size; // data size }; Data Information \uf0c1 The detailed data structure of the UDP message is described for each received and transmitted message as follows. 4 recieve control messages: Cirrus_tx Cirrus_ControlPosition Cirrus_Braking Cirrus_Engine 5 send sensor messages: Sensor_NavSatFix (GNSS) Sensor_Imu Sensor_Image Sensor_Radar SensorLidar /* Morai Data type define */ #ifndef DATA_TYPE_H #define DATA_TYPE_H enum class MoraiDataType : uint32_t { NONE = 0, SENSOR_GNSS, SENSOR_IMAGE, SENSOR_RADAR, SENSOR_IMU, SENSOR_LIDAR, CIRRUS_TX = 0x64, // 100 cirrus -> morai CIRRUS_CONTROL_POSITION, // 101 SIM -> JSBSim CIRRUS_BRAKING, // 102 CIRRUS_ENGINE, // 103 LARGE_DATA = 0x3E8, // 1000 for test }; #endif And the data structure of all receiving and sending UDP messages includes the following common struct type. struct Ros_Timestamp { int32_t sec; uint32_t nanosec; }; struct Ros_HEADER { Ros_Timestamp stamp; uint8_t str_len; char* frame_id; }; struct Sensor_NavSatStatus { int8_t status; uint16_t service; }; UDP Recieve Messages \uf0c1 The data structure and packets for each UDP message received by Morai SIM from the external Cirrus system are as follows. Cirrus_tx \uf0c1 struct Cirrus_Tx { float lon; // deg float lat; // deg float alt; // ft float heading; // deg float roll; // deg float pitch; // deg float sur_aileron; // [-1 ~ 1] float sur_flap; // [-1 ~ 1] float sur_elevator; // [-1 ~ 1] float sur_rudder; // [-1 ~ 1] }; Cirrus_ControlPosition \uf0c1 struct Cirrus_ControlPosition { float SetDaCmd; // get_aileron -1 ~ +1 float SetRollTrimCmd; // get_aileron_trim (-0.1 ~ +0.1) float SetDeCmd; // get_elevator -1 ~ +1 float SetPitchTrimCmd; // get_elevator_trim (-0.1 ~ +0.1) float SetDrCmd; // get_rudder -1 ~ +1 float SetDsCmd; // get_rudder -1 ~ +1 float SetYawTrimCmd; // get_rudder_trim (-0.1 ~ +0.1) float SetDfCmd; // get_flaps 0 ~ 1 }; Cirrus_Braking \uf0c1 struct Cirrus_Braking { float SetBrake; // Left + Right 0~1 }; Cirrus_Engine \uf0c1 struct Cirrus_Engine { float SetThrottleCmd; // get_throttle(i) 0~1 }; UDP Send Messages \uf0c1 The data structure and packet for each UDP message transmitted by MORA SIM to the external Cirrus system are as follows. GNSS \uf0c1 struct Sensor_NavSatFix { int id; Ros_HEADER header; Sensor_NavSatStatus status; double latitude; double longitude; double altitude; double position_covariance[9]; uint8_t position_covariance_type; }; IMU \uf0c1 struct Sensor_Imu { uint32_t id; Ros_HEADER header; geometry_msgs::Quarternion orientation; double orientation_covariance[9]; geometry_msgs::Vector3 angular_velocity; double angular_velocity_covariance[9]; geometry_msgs::Vector3 linear_acceleration; double liner_acceleration_covariance[9]; }; Camera (Image) \uf0c1 struct Sensor_Image { int id; Ros_HEADER header; uint32_t height; uint32_t width; uint16_t str_len; char* encoding; uint8_t is_bigendian; uint32_t step; uint8_t* data; }; Radar \uf0c1 struct Sensor_Radar { uint32_t id; Ros_HEADER header; uint8_t num_detections; Radar_Detection detections[64]; }; Lidar \uf0c1 typedef struct PointField { uint8_t name_length; std::string name; uint32_t offset; uint8_t datatype; uint32_t count; } POINT_FIELD; typedef struct SensorLidar { uint32_t id; RosHeader header; uint32_t height; // 2D structure of the point cloud.If the cloud is unordered, height is uint32_t width; // 1 and width is the length of the point cloud. uint8_t fields_len; // size of PointField PointField* fields; // Describes the channels and their layout in the binary data blob. bool is_bigendian; // Is this data bigendian ? uint32_t point_step; // Length of a point in bytes uint32_t row_step; // Length of a row in bytes uint8_t* data; // Actual point data, size is(row_step* height) bool is_dense; // True if there are no invalid points } SENSRO_LIDAR; ROS2 Send Messages \uf0c1 The type and data format for each ROS2 message transmitted by MORA SIM to the external Cirrus system are as follows. GNSS \uf0c1 Message Type: sensor_msgs/msg/NavSatFix Data Format No Name Type Unit Remarks 1 header Header 2 status NavSatStatus 3 latitude double deg 4 longitude double deg 5 altitude double deg 6 position_covariance double[9] East, North, and Up (ENU), in row major order 7 position_covariance_type uint8 deg 0 : COVARIANCE_TYPE_UNKNOWN 1 : COVARIANCE_TYPE_APPROXIMATED 2 : COVARIANCE_TYPE_DIAGONAL_KNOWN 3 : COVARIANCE_TYPE_KNOWN IMU \uf0c1 Message Type: sensor_msgs/msg/Imu Data Format No Name Type Unit Remarks 1 header Header 2 orientation Quaternion 3 orientation_covariance double[9] Row major about x, y, z axes 4 angular_velocity Vector3 rad/sec 5 angular_velocity_covariance double[9] Row major about x, y, z axes 6 linear_acceleration Vector3 m/s^s 7 linear_acceleration_covariance double[9] Row major about x, y, z axes Image (Camera) \uf0c1 Message Type: sensor_msgs/msg/Image Data Format No Name Type Unit Remarks 1 header Header 2 height uint32 number of rows 3 width uint32 number of columns 4 encoding string 'bgra8' 5 is_bigendian uint8 6 step uint32 value is (width * 4) 7 data uint8[] size is (step * height) Radar \uf0c1 Message Type: morai_msgs/msg/RadarDetections Data Format No Name Type Unit Remarks 1 header Header 2 detections RadarDetection[] RadarDetection No Name Type Unit Remarks 1 detection_id uint16 Index of each radar detection point 2 position Point m x, y, z position of each radar detection point 3 azimuth float deg azimuth angle of each radar detection point in Degree 4 rangerate float m/s relative velocity of the radar detected target w.r.t radial direction 5 amplitude float amplitude of the reflected signal of the radar detected target(rcs) Lidar \uf0c1 Message Type: sensor_msgs/msg/PointCloud2 Data Format No Name Type Unit Remarks 1 header Header 2 height uint32 If the cloud is unordered, height is 1 3 width uint32 Width is the length of the point cloud 4 fields PointField [] Describes the channels and their layout in the binary data blob 5 is_bigendian 6 point_step uint32 Length of a point in bytes 7 data uint8[] size is (row_step*height) 8 is_dense bool True if there are no invalid points","title":"Network Configuration"},{"location":"user-guide/network/#network-configuration","text":"This section describes the configuration of the network environment of MORAI SIM: Air, the setting method for data communication between external systems, and sending/receiving messages.","title":"Network Configuration"},{"location":"user-guide/network/#supported-communication-method","text":"MORAI SIM: Air supports UDP and ROS2 for network communication between the simulator and external systems. UDP is a widely used network protocol for transmitting data over the internet, while ROS2 (Robot Operating System 2) is a popular middleware for robotics and automation applications. The MORAI SIM: Air simulator allows for sending sensor data and receiving aircraft control messages using either UDP or ROS2 communication methods. To communicate with MORAI SIM: Air, Depending on the simulator's message transmission/reception method, the following network settings are required. Figure 1. Network communication method supported by MORAI SIM: Air MORAI SIM: Air sends sensor data to an external system UDP Network Settings in each sensor model in the simulator Receive UDP messages and publish to ROS2 using UDP to ROS2 Bridge MORAI SIM: Air receives aircraft control messages from an external system UDP Network Settings provided by the simulator (Subscriber IP/Port setting) Subscribe to ROS2 messages and them over UDP using UDP to ROS2 Bridge The UDP to ROS2 Bridge serves to connect data between the UDP-based simulator and the ROS2 system by receiving and transmitting UDP signals and issuing and subscribing to ROS2 as shown below. Figure 2. Role of 'UDP to ROS2 Bridge' \u26a0\ufe0f WARNING The current simulator does not provide direct support for transmitting/receiving ROS2 messages. Therefore, UDP to ROS2 Bridge should be used for ROS2 communication with an external system.","title":"Supported communication method"},{"location":"user-guide/network/#receiving-aircraft-control-messages","text":"For the simulator to receive ROS2 messages via UDP, Configure the ROS2 to UDP communication environment and set the network of the simulator in the order below.","title":"Receiving Aircraft Control Messages"},{"location":"user-guide/network/#step-1-subscribe-to-ros2-messages","text":"For this step, you need to install and run UDP to ROS2 Bridge . \u2705 TIPS See the UDP to ROS2 Bridge User Guide provided separately.","title":"Step 1: Subscribe to ROS2 messages"},{"location":"user-guide/network/#step-2-udp-network-settings-in-the-simulator","text":"","title":"Step 2: UDP network settings in the simulator"},{"location":"user-guide/network/#1-activate-the-network-menu","text":"Click Network in the top left menu as shown below.","title":"1) Activate the network menu"},{"location":"user-guide/network/#2-configure-host-ipport","text":"The method of receiving aircraft control messages in the simulator consists of GHOST MODE and EXTERNAL CTRL protocol. Configure the Host IP/Port as below to operate the aircraft in GHOST MODE by receiving external control messages. Host IP: Enter the IP of the host PC running the simulator Host Port: Enter the Port of Host PC Host IP/Port configuration method for EXTERNAL CTRL protocol is the same as above.","title":"2) Configure Host IP/Port"},{"location":"user-guide/network/#3-network-connection","text":"Click Connect at the bottom PROTOCOL_SUB_GHOSTMODE or PROTOCOL_SUB_EXTERNALCTRL . Then, it enters into a standby state in which a control message can be received.","title":"3) Network connection"},{"location":"user-guide/network/#step-3-send-messages-from-external-server","text":"Send a message from the external server to the simulator using UDP to ROS2 Bridge. Send coordinates by playing rosbag file Send UDP packet UDP messages received by each mode are as follows. GHOST MODE: Cirrus_tx EXTERNAL CTRL: CIRRUS_CONTROL_POSITION // 101 SIM -> JSBSim CIRRUS_BRAKING // 102 CIRRUS_ENGINE // 103 \u2705 TIPS For details on the types and structure of UDP messages received in GHOST MODE or EXTERNAL CTRL, see the UDP Recieve Messages section.","title":"Step 3: Send messages from external server"},{"location":"user-guide/network/#sending-sensor-messages","text":"For the simulator to send UDP messages via ROS2, Set the sensor network of the simulator in the order below and configure the UDP to ROS2 communication environment.","title":"Sending Sensor Messages"},{"location":"user-guide/network/#step-1-senosr-network-settings-in-the-simulator","text":"","title":"Step 1: Senosr network settings in the simulator"},{"location":"user-guide/network/#1-place-sensors-on-the-aircraft","text":"\u2705 TIPS For details on how to place the sensor, see the Sensor Placement section.","title":"1) Place sensors on the aircraft"},{"location":"user-guide/network/#2-configure-destination-ipport","text":"Configure Destination IP/Port for UDP network in Network Settings at the bottom of the sensor setting window. Destination IP and Port : Enter the IP and port of the target server that transmits sensor data in the simulator. In case of ROS2 communication in the server, enter the IP and Port of the server where UDP to ROS2 Bridge is installed.","title":"2) Configure Destination IP/Port"},{"location":"user-guide/network/#3-network-connection_1","text":"Click Connect at the bottom of Network Settings . Then, it enters into a standby state in which sensor messages can be transmitted. In the case of a Camera sensor, when a sensor network is connected, a preview window appears on the left side of the sensor setting window as shown below.","title":"3) Network connection"},{"location":"user-guide/network/#step-2-publishing-to-ros2","text":"For this step, you need to install and run UDP to ROS2 Bridge . \u2705 TIPS See the UDP to ROS2 Bridge User Guide provided separately. \u2705 TIPS For details on the types and structure of UDP and ROS2 messages sent by the simulator, see the UDP Send Messages and ROS2 Send Messages section.","title":"Step 2: Publishing to ROS2"},{"location":"user-guide/network/#network-message-specifications","text":"This section describes details such as the type and format of messages received and transmitted by MORAI SIM: Air as described above.","title":"Network Message Specifications"},{"location":"user-guide/network/#udp-messages-structure","text":"All receiving and sending UDP messages are composed of 'Header + Data' . If the UDP packet size exceeds 65000, it is internally separated and transmitted, and reassembled at the receiving point. However, if the receiver uses Morai's UDP module, even if the defined max buffer is less than 65000, the separation logic works when trying to send a message larger than the max buffer. Ex) #define Max_buffer 1024: If the total data size to be sent exceeds 1024, it is sent separately.","title":"UDP Messages Structure"},{"location":"user-guide/network/#header-information","text":"struct MoraiHeader { char header_name[12]; // MoraiHeader int data_type; // data_type.h \ucc38\uc870 int data_size; // data size };","title":"Header Information"},{"location":"user-guide/network/#data-information","text":"The detailed data structure of the UDP message is described for each received and transmitted message as follows. 4 recieve control messages: Cirrus_tx Cirrus_ControlPosition Cirrus_Braking Cirrus_Engine 5 send sensor messages: Sensor_NavSatFix (GNSS) Sensor_Imu Sensor_Image Sensor_Radar SensorLidar /* Morai Data type define */ #ifndef DATA_TYPE_H #define DATA_TYPE_H enum class MoraiDataType : uint32_t { NONE = 0, SENSOR_GNSS, SENSOR_IMAGE, SENSOR_RADAR, SENSOR_IMU, SENSOR_LIDAR, CIRRUS_TX = 0x64, // 100 cirrus -> morai CIRRUS_CONTROL_POSITION, // 101 SIM -> JSBSim CIRRUS_BRAKING, // 102 CIRRUS_ENGINE, // 103 LARGE_DATA = 0x3E8, // 1000 for test }; #endif And the data structure of all receiving and sending UDP messages includes the following common struct type. struct Ros_Timestamp { int32_t sec; uint32_t nanosec; }; struct Ros_HEADER { Ros_Timestamp stamp; uint8_t str_len; char* frame_id; }; struct Sensor_NavSatStatus { int8_t status; uint16_t service; };","title":"Data Information"},{"location":"user-guide/network/#udp-recieve-messages","text":"The data structure and packets for each UDP message received by Morai SIM from the external Cirrus system are as follows.","title":"UDP Recieve Messages"},{"location":"user-guide/network/#cirrus_tx","text":"struct Cirrus_Tx { float lon; // deg float lat; // deg float alt; // ft float heading; // deg float roll; // deg float pitch; // deg float sur_aileron; // [-1 ~ 1] float sur_flap; // [-1 ~ 1] float sur_elevator; // [-1 ~ 1] float sur_rudder; // [-1 ~ 1] };","title":"Cirrus_tx"},{"location":"user-guide/network/#cirrus_controlposition","text":"struct Cirrus_ControlPosition { float SetDaCmd; // get_aileron -1 ~ +1 float SetRollTrimCmd; // get_aileron_trim (-0.1 ~ +0.1) float SetDeCmd; // get_elevator -1 ~ +1 float SetPitchTrimCmd; // get_elevator_trim (-0.1 ~ +0.1) float SetDrCmd; // get_rudder -1 ~ +1 float SetDsCmd; // get_rudder -1 ~ +1 float SetYawTrimCmd; // get_rudder_trim (-0.1 ~ +0.1) float SetDfCmd; // get_flaps 0 ~ 1 };","title":"Cirrus_ControlPosition"},{"location":"user-guide/network/#cirrus_braking","text":"struct Cirrus_Braking { float SetBrake; // Left + Right 0~1 };","title":"Cirrus_Braking"},{"location":"user-guide/network/#cirrus_engine","text":"struct Cirrus_Engine { float SetThrottleCmd; // get_throttle(i) 0~1 };","title":"Cirrus_Engine"},{"location":"user-guide/network/#udp-send-messages","text":"The data structure and packet for each UDP message transmitted by MORA SIM to the external Cirrus system are as follows.","title":"UDP Send Messages"},{"location":"user-guide/network/#gnss","text":"struct Sensor_NavSatFix { int id; Ros_HEADER header; Sensor_NavSatStatus status; double latitude; double longitude; double altitude; double position_covariance[9]; uint8_t position_covariance_type; };","title":"GNSS"},{"location":"user-guide/network/#imu","text":"struct Sensor_Imu { uint32_t id; Ros_HEADER header; geometry_msgs::Quarternion orientation; double orientation_covariance[9]; geometry_msgs::Vector3 angular_velocity; double angular_velocity_covariance[9]; geometry_msgs::Vector3 linear_acceleration; double liner_acceleration_covariance[9]; };","title":"IMU"},{"location":"user-guide/network/#camera-image","text":"struct Sensor_Image { int id; Ros_HEADER header; uint32_t height; uint32_t width; uint16_t str_len; char* encoding; uint8_t is_bigendian; uint32_t step; uint8_t* data; };","title":"Camera (Image)"},{"location":"user-guide/network/#radar","text":"struct Sensor_Radar { uint32_t id; Ros_HEADER header; uint8_t num_detections; Radar_Detection detections[64]; };","title":"Radar"},{"location":"user-guide/network/#lidar","text":"typedef struct PointField { uint8_t name_length; std::string name; uint32_t offset; uint8_t datatype; uint32_t count; } POINT_FIELD; typedef struct SensorLidar { uint32_t id; RosHeader header; uint32_t height; // 2D structure of the point cloud.If the cloud is unordered, height is uint32_t width; // 1 and width is the length of the point cloud. uint8_t fields_len; // size of PointField PointField* fields; // Describes the channels and their layout in the binary data blob. bool is_bigendian; // Is this data bigendian ? uint32_t point_step; // Length of a point in bytes uint32_t row_step; // Length of a row in bytes uint8_t* data; // Actual point data, size is(row_step* height) bool is_dense; // True if there are no invalid points } SENSRO_LIDAR;","title":"Lidar"},{"location":"user-guide/network/#ros2-send-messages","text":"The type and data format for each ROS2 message transmitted by MORA SIM to the external Cirrus system are as follows.","title":"ROS2 Send Messages"},{"location":"user-guide/network/#gnss_1","text":"Message Type: sensor_msgs/msg/NavSatFix Data Format No Name Type Unit Remarks 1 header Header 2 status NavSatStatus 3 latitude double deg 4 longitude double deg 5 altitude double deg 6 position_covariance double[9] East, North, and Up (ENU), in row major order 7 position_covariance_type uint8 deg 0 : COVARIANCE_TYPE_UNKNOWN 1 : COVARIANCE_TYPE_APPROXIMATED 2 : COVARIANCE_TYPE_DIAGONAL_KNOWN 3 : COVARIANCE_TYPE_KNOWN","title":"GNSS"},{"location":"user-guide/network/#imu_1","text":"Message Type: sensor_msgs/msg/Imu Data Format No Name Type Unit Remarks 1 header Header 2 orientation Quaternion 3 orientation_covariance double[9] Row major about x, y, z axes 4 angular_velocity Vector3 rad/sec 5 angular_velocity_covariance double[9] Row major about x, y, z axes 6 linear_acceleration Vector3 m/s^s 7 linear_acceleration_covariance double[9] Row major about x, y, z axes","title":"IMU"},{"location":"user-guide/network/#image-camera","text":"Message Type: sensor_msgs/msg/Image Data Format No Name Type Unit Remarks 1 header Header 2 height uint32 number of rows 3 width uint32 number of columns 4 encoding string 'bgra8' 5 is_bigendian uint8 6 step uint32 value is (width * 4) 7 data uint8[] size is (step * height)","title":"Image (Camera)"},{"location":"user-guide/network/#radar_1","text":"Message Type: morai_msgs/msg/RadarDetections Data Format No Name Type Unit Remarks 1 header Header 2 detections RadarDetection[] RadarDetection No Name Type Unit Remarks 1 detection_id uint16 Index of each radar detection point 2 position Point m x, y, z position of each radar detection point 3 azimuth float deg azimuth angle of each radar detection point in Degree 4 rangerate float m/s relative velocity of the radar detected target w.r.t radial direction 5 amplitude float amplitude of the reflected signal of the radar detected target(rcs)","title":"Radar"},{"location":"user-guide/network/#lidar_1","text":"Message Type: sensor_msgs/msg/PointCloud2 Data Format No Name Type Unit Remarks 1 header Header 2 height uint32 If the cloud is unordered, height is 1 3 width uint32 Width is the length of the point cloud 4 fields PointField [] Describes the channels and their layout in the binary data blob 5 is_bigendian 6 point_step uint32 Length of a point in bytes 7 data uint8[] size is (row_step*height) 8 is_dense bool True if there are no invalid points","title":"Lidar"},{"location":"user-guide/sensors/","text":"Sensor Settings \uf0c1 This section describes how to place each sensor provided by the simulator on the aircraft and set the sensor parameters to obtain sensor data. Sensor Placement \uf0c1 Place the sensors on the aircraft in the order below. 1) Click \u2228 on the right side of the sensor icon in the menu at the top left as shown below. 2) When you select a sensor to be placed in the popped-up sensor list, the following Sensor Settings window appears on the right. Ex) When selecting Camera 3) When you click the mouse on the position of the aircraft where you want to place the sensor, the corresponding sensor item is created in Sensor Settings . Ex) When placing Camera Adding sensors or placing different types of sensors \uf0c1 The method of adding the same type of sensor or placing a different type of sensor is the same as the sensor placement method 1) to 3) above. Deleting placed sensors \uf0c1 In Sensor Settings on the right, click ... of the sensor item you want to delete and click Delete . Ex) When deleting Camera \u2705 TIPS The method for deleting other types of sensors is the same as above. Sensor Parameter Setting \uf0c1 In the sensor parameter setting, the parameters for the location coordinates (x, y, z) and posture (rotation angle of roll, pitch, and yaw) of the placed sensor and the specialized functions supported by each sensor model are set. When you click the created sensor item name (eg. Camera-0 ), the parameter setting window for the corresponding sensor appears as shown below. Ex) Parameter setting window for Camera Location Coordinates \uf0c1 The location coordinates of all sensors provided by the simulator are set based on the aircraft coordinate system below. Lens Distortion of Camera \uf0c1 The Lens Distortion effect reproduces the appearance of a real camera lens by distorting the final rendered image. The simulator's camera sensor model provides Lens Distortion as shown below. The setting parameter for lens distortion is as follows: K1, K2, K3: parameters related to radial distortion, simulating the phenomenon of radial distortion by the refractive index of a convex lens P1, P2: Parameter for making sensor attachment errors that occur during the camera assembly process Gaussian Noise of GNSS \uf0c1 The simulator's GPS sensor model supports Gaussian Noise as shown below. The value of Gaussian Noise is adjusted by entering Mean(m) and Stdev(%) values. Network Settings \uf0c1 The network of the sensor model provided by the simulator only sets UDP communication as shown below. \u2705 TIPS For information on how to set up a sensor network, see the Sending Sensor Messages section.","title":"Sensor Settings"},{"location":"user-guide/sensors/#sensor-settings","text":"This section describes how to place each sensor provided by the simulator on the aircraft and set the sensor parameters to obtain sensor data.","title":"Sensor Settings"},{"location":"user-guide/sensors/#sensor-placement","text":"Place the sensors on the aircraft in the order below. 1) Click \u2228 on the right side of the sensor icon in the menu at the top left as shown below. 2) When you select a sensor to be placed in the popped-up sensor list, the following Sensor Settings window appears on the right. Ex) When selecting Camera 3) When you click the mouse on the position of the aircraft where you want to place the sensor, the corresponding sensor item is created in Sensor Settings . Ex) When placing Camera","title":"Sensor Placement"},{"location":"user-guide/sensors/#adding-sensors-or-placing-different-types-of-sensors","text":"The method of adding the same type of sensor or placing a different type of sensor is the same as the sensor placement method 1) to 3) above.","title":"Adding sensors or placing different types of sensors"},{"location":"user-guide/sensors/#deleting-placed-sensors","text":"In Sensor Settings on the right, click ... of the sensor item you want to delete and click Delete . Ex) When deleting Camera \u2705 TIPS The method for deleting other types of sensors is the same as above.","title":"Deleting placed sensors"},{"location":"user-guide/sensors/#sensor-parameter-setting","text":"In the sensor parameter setting, the parameters for the location coordinates (x, y, z) and posture (rotation angle of roll, pitch, and yaw) of the placed sensor and the specialized functions supported by each sensor model are set. When you click the created sensor item name (eg. Camera-0 ), the parameter setting window for the corresponding sensor appears as shown below. Ex) Parameter setting window for Camera","title":"Sensor Parameter Setting"},{"location":"user-guide/sensors/#location-coordinates","text":"The location coordinates of all sensors provided by the simulator are set based on the aircraft coordinate system below.","title":"Location Coordinates"},{"location":"user-guide/sensors/#lens-distortion-of-camera","text":"The Lens Distortion effect reproduces the appearance of a real camera lens by distorting the final rendered image. The simulator's camera sensor model provides Lens Distortion as shown below. The setting parameter for lens distortion is as follows: K1, K2, K3: parameters related to radial distortion, simulating the phenomenon of radial distortion by the refractive index of a convex lens P1, P2: Parameter for making sensor attachment errors that occur during the camera assembly process","title":"Lens Distortion of Camera"},{"location":"user-guide/sensors/#gaussian-noise-of-gnss","text":"The simulator's GPS sensor model supports Gaussian Noise as shown below. The value of Gaussian Noise is adjusted by entering Mean(m) and Stdev(%) values.","title":"Gaussian Noise of GNSS"},{"location":"user-guide/sensors/#network-settings","text":"The network of the sensor model provided by the simulator only sets UDP communication as shown below. \u2705 TIPS For information on how to set up a sensor network, see the Sending Sensor Messages section.","title":"Network Settings"},{"location":"user-guide/useful/","text":"Useful functions and Tips \uf0c1 Terminology \uf0c1 The main teminology used for this documents is as follows: Old Variable Name New Variable Name or Expression current_page page include_nav nav|length>1 include_next_prev (page.next_page or page.previous_page) site_name config.site_name site_author config.site_author page_description config.site_description repo_url config.repo_url repo_name config.repo_name site_url config.site_url copyright config.copyright google_analytics config.google_analytics homepage_url nav.homepage.url favicon {{ base_url }}/img/favicon.ico Conventions \uf0c1 The main teminology used for this documents is as follows:","title":"Useful functions and Tips"},{"location":"user-guide/useful/#useful-functions-and-tips","text":"","title":"Useful functions and Tips"},{"location":"user-guide/useful/#terminology","text":"The main teminology used for this documents is as follows: Old Variable Name New Variable Name or Expression current_page page include_nav nav|length>1 include_next_prev (page.next_page or page.previous_page) site_name config.site_name site_author config.site_author page_description config.site_description repo_url config.repo_url repo_name config.repo_name site_url config.site_url copyright config.copyright google_analytics config.google_analytics homepage_url nav.homepage.url favicon {{ base_url }}/img/favicon.ico","title":"Terminology"},{"location":"user-guide/useful/#conventions","text":"The main teminology used for this documents is as follows:","title":"Conventions"}]}